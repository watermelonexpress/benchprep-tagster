#!/usr/bin/env ruby

require 'date'

begin
  if ARGV[0]
    release_date = Date.parse ARGV[0]
  else
    release_date = Date.today
    release_date = release_date.next until release_date.thursday?
  end

  release_date = release_date.strftime('%Y%m%d')

  `git checkout -b deploy-#{release_date}`
  `git push origin deploy-#{release_date}`
rescue => exception
  puts "An unexpected error occurred: #{exception.message}"
end